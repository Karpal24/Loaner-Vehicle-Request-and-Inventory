<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[api.controller=function() {
  /* widget controller */
  var c = this;
};]]></client_script>
        <controller_as>c</controller_as>
        <css>$sp-space--sm: 8px !default;&#13;
.panel-heading {&#13;
  position: relative;&#13;
  &gt; .fa-filter { &#13;
    position: absolute;&#13;
    top: 1rem; &#13;
    right: 1rem; &#13;
  }&#13;
}&#13;
.draft-item-row {&#13;
  display: flex;&#13;
}&#13;
&#13;
.draft-item-cell {&#13;
  display: flex;&#13;
  align-items: center;&#13;
}&#13;
&#13;
.nav-tabs &gt; li &gt; a:focus,&#13;
.nav-tabs &gt; li.active &gt; a:hover,&#13;
.nav-tabs &gt; li.active &gt; a,&#13;
.nav-tabs &gt; li.active &gt; a:focus,&#13;
.nav-tabs &gt; li.active &gt; a:hover&#13;
{&#13;
  border-bottom: 3px solid $primary; /* Show border only at the bottom for the active tab */&#13;
 	color: $primary;&#13;
  font-weight: bold;&#13;
  border-top: none;&#13;
  border-left: none;&#13;
  border-right: none;&#13;
  box-shadow: none;&#13;
}&#13;
&#13;
.nav-tabs {&#13;
  border-bottom: 1px solid $nav-tabs-justified-link-border-color; /* Show the bottom border for all tabs */&#13;
  border-radius: 3px 3px 0 0;&#13;
}&#13;
&#13;
.panel {&#13;
  &gt; .list-group, &gt;.panel-collapse{&#13;
    	.list-group-item {&#13;
		  	border-width: 1px 0 0 0;&#13;
      }&#13;
  }&#13;
  .requests-header-container {&#13;
    margin: 0px;&#13;
    border: none;&#13;
    display: flex;&#13;
    flex-wrap: wrap;&#13;
    justify-content: flex-end;&#13;
    min-width: min-content;&#13;
    &#13;
    .fit-content {&#13;
      min-width: fit-content;&#13;
    }&#13;
  }&#13;
}&#13;
&#13;
.uib-vis-tab &gt; a {&#13;
  color: $gray-dark;&#13;
}&#13;
&#13;
.btn-show-more {&#13;
  margin-left: auto;&#13;
  margin-right: auto;&#13;
  display: flex;&#13;
}&#13;
&#13;
.control-view {&#13;
  display: flex;&#13;
  align-items: baseline;&#13;
}&#13;
&#13;
@media  (min-width: 768px) and (max-width: 991px) {&#13;
	.padding-left-large {&#13;
		padding-left: 45px !important;&#13;
	}&#13;
}&#13;
&#13;
@media  (max-width: 991px) {&#13;
  .adjust-width {&#13;
	width: 100% !important;&#13;
  }&#13;
  .align-icon {&#13;
	padding: 6px $sp-space--sm;&#13;
  }&#13;
}&#13;
&#13;
.column-headers {&#13;
  position: sticky;&#13;
  position: -webkit-sticky;&#13;
  top: 0;&#13;
  z-index: 1;&#13;
  box-shadow: 0px 1px 0px $panel-inner-border;&#13;
  font-weight: 700;&#13;
}&#13;
</css>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description>my request</description>
        <docs/>
        <field_list>title,active,color,order,sys_mod_count,ref_sp_instance_ais.disable_all_suggestions,ref_sp_instance_link.sc_cat_item</field_list>
        <has_preview>false</has_preview>
        <id/>
        <internal>false</internal>
        <link><![CDATA[function link(scope, element, attrs, controller) {
  
}]]></link>
        <name>My VM Request</name>
        <option_schema/>
        <public>false</public>
        <roles/>
        <script><![CDATA[(function() {
  /* populate the 'data' object */
  /* e.g., data.table = $sp.getValue('table'); */

})();]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-09-13 22:26:35</sys_created_on>
        <sys_id>a747627a83609210b807c1ffeeaad340</sys_id>
        <sys_mod_count>2</sys_mod_count>
        <sys_name>My VM Request</sys_name>
        <sys_package display_value="Loaner Vehicle Request and Inventory" source="x_1399238_lva">0e804ac483334e10b807c1ffeeaad3df</sys_package>
        <sys_policy/>
        <sys_scope display_value="Loaner Vehicle Request and Inventory">0e804ac483334e10b807c1ffeeaad3df</sys_scope>
        <sys_update_name>sp_widget_a747627a83609210b807c1ffeeaad340</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-09-13 22:30:33</sys_updated_on>
        <template><![CDATA[<div class="panel panel-default b" ng-init="c.trackPage()">
 <div class="panel-heading" ng-show="::!data.is_associated_ticket_tab">
    <h2 class="panel-title">{{::data.messages.myRequestsTitle}}</h2>
  </div> 	
  
  <uib-tabset role="tablist" ng-hide="::c.data.hide_draft_tab">
    <uib-tab role="tab" active="c.data.isRequestsTabActive" select="c.changeSelectedTab('requests')" index="requests" class="uib-vis-tab" heading="${Submitted requests}">
        <div ng-include="'myRequests'"></div>
    </uib-tab>
    <uib-tab role="tab" active="c.data.isDraftsTabActive" select="c.changeSelectedTab('drafts')" index="drafts" class="uib-vis-tab" heading="${Drafts}">
        <div ng-include="'draftItemsTemplate'"></div>
    </uib-tab>
  </uib-tabset>

<div ng-include="'myRequests'" ng-show="::c.data.hide_draft_tab"></div>

<script type="text/ng-template" id="draftItemsTemplate">
  <div class="panels-container list-group">
   <div ng-show="::c.data.draftItems.length > 0" class="list-group-item row requests-header-container">
          <div class="col-md-4 col-xs-12 padding-left-large fit-content">
            <div class="input-group" style="width:100%">
              <input ng-model="c.data.draftSearchText" ng-change="c.updateFilteredDraftItems()" class="form-control" style="width:100%" placeholder="{{c.data.draftFilterMsg}}" aria-label="{{c.data.draftFilterMsg}}">
              <span class="input-group-btn">
                <button class="btn btn-default align-icon" type="button" data-original-title="{{c.data.draftFilterMsg }}" aria-label="{{c.data.draftFilterMsg }}" data-toggle="tooltip" data-placement="bottom">
                	<i class="fa fa-search"></i>
                </button>
              </span>
            </div><!-- /input-group -->
          </div>
    	</div>
      <div ng-if="c.data.draftItems.length > 0 && (!c.filteredDraftItems || c.filteredDraftItems.length == 0)" class="panel-body panels-container">
        ${Search didn't match any draft items} 
      </div> 
  
   <div ng-if="c.data.draftItems.length == 0" class="panel-body panels-container">
        ${You do not have any draft items} 
   </div>
      <div role="table" ng-if="(c.filteredDraftItems && c.filteredDraftItems.length > 0)" class="table" aria-label="{{::c.data.draftItemsMsg}}">
      <div role="rowgroup" class="column-headers">
        <div role="row" class="list-group-item table-responsive">
          <span role="columnheader" class="col-xs-4 padder-r-none padder-l-none">${Draft name}</span>
          <span role="columnheader" class="col-xs-4 padder-md">${Item name}</span>
          <span role="columnheader" class="col-xs-2 padder-r-none padder-l-none">${updated_capital}</span>
           <span role="columnheader" class="col-xs-1 padder-r-none padder-l-none"></span>
        </div>
   	  </div>
      <ul role="rowgroup" class="padder-l-none padder-r-none">
        <li role="row" ng-repeat="item in c.filteredDraftItems" class="list-group-item draft-item-row table-responsive" style="margin:0px" >
          <div role="cell" class="draft-item-cell col-xs-4 padder-l-none padder-r-none main-column">
            <div class="primary-display text-wrap">
              <a href="?id={{'sc_cat_item'}}&{{'edit=draft'}}&sys_id={{::item.sys_id}}" aria-label="{{::item.cart_item_name}}"> {{::item.cart_item_name}} </a>
            </div>
          </div>
          <div role="cell" class="draft-item-cell col-xs-4 padder-md">
            <div class="text-wrap">
              <span> {{::item.name}}</span>
            </div>
          </div>
          <div role="cell" class="draft-item-cell col-xs-2 padder-l-none padder-r-none updated-column">
            <div class="updated">
              <i class="fa fa-clock-o" aria-hidden="true" title="${Updated}"></i>
              <sn-time-ago timestamp="::item.sys_updated_on"/>
            </div>
          </div>
          <div  role="cell" class="draft-item-cell col-xs-1 padder-l-none padder-r-none">
            <div class="btn-group btn-group-sm">
              <button type="button" class="btn btn-clear" ng-click="c.removeDraftItem(item)" data-toggle="tooltip" data-placement="top"  data-container="body" title="${Remove Draft Item}">
              	<i class=" icon-trash btn-remove" aria-hidden="true"></i>
              </button>
            </div>
          </td>
        </li>
        
      </ul>
       </div>
       </div>
       <div class="col-sm-12 pull-none" ng-if="c.data.hasMoreDrafts" style="padding-bottom:15px">
          <div class="text-a-c" ng-if="c.fetchingDrafts">
			  <i class="fa fa-spinner fa-pulse fa-2x fa-fw"></i>
			  <span class="sr-only">${Loading more draft items}</span>
          </div>
          <button class="btn btn-default btn-show-more" ng-click="c.loadMoreDrafts()">${Show more drafts}</button>
      </div>
</script>

<script type="text/ng-template" id="myRequests">
    <div class="panels-container list-group">
			<div ng-show="::!data.is_associated_ticket_tab" class="list-group-item row requests-header-container">
          <div class="col-md-3 col-xs-12 m-b-sm fit-content">
            <div class="form-inline control-view" ng-if="c.options.show_view == 'true'">
            	<label class="control-label hidden-xs wrapper-xs " id="label_view" for="view">${View}</label>
              <select ng-model="c.viewFilter" id="view" class="form-control adjust-width" ng-change="c.changeView()" style="width:80%"
                      ng-options="item.key as item.value for item in c.filterOptions">
              </select>
            </div>
          </div>
          <div class="col-md-4 col-xs-12 padding-left-large fit-content">
            <div class="input-group" style="width:100%">
              <input ng-model="c.filterText" ng-keypress="c.checkEnter($event)"class="form-control" style="width:100%" placeholder="{{data.filterMsg}}" aria-label="{{data.filterMsg}}">
              <span class="input-group-btn">
                <button class="btn btn-default align-icon" type="button" ng-click="c.search()" data-original-title="{{data.filterMsg}}" aria-label="{{data.filterMsg}}" data-toggle="tooltip" data-placement="bottom">
                	<i class="fa fa-search"></i>
                </button>
              </span>
            </div><!-- /input-group -->
              
          </div>
    	</div>
 
    	<div ng-if="c.data.request.req_list.length == 0 && !c.filterText" class="panel-body panels-container">
        ${You do not have any requests} 
      </div>
    	<div ng-if="c.data.request.req_list.length == 0 && c.filterText" class="panel-body panels-container">
        ${Search didn't match any requests} 
      </div>
      <div role="table" ng-if="c.data.request.req_list.length > 0" class="table" aria-label="{{::data.messages.myRequestsTitle}}">
      <div ng-show="::!data.is_associated_ticket_tab" role="rowgroup" class="column-headers">
        <div role="row" class="list-group-item table-responsive">
          <span role="columnheader" class="col-xs-6 padder-r-none padder-l-none">${Request}</span>
          <span role="columnheader" class="col-xs-3 padder-r-none padder-l-none">${State}</span>
          <span role="columnheader" class="col-xs-3 padder-r-none padder-l-none">${updated_capital}</span>
        </div>
   	  </div>
      <ul role="rowgroup" class="padder-l-none padder-r-none">
        <li role="row" class="list-group-item table-responsive" ng-repeat="item in c.data.request.req_list | limitTo: c.data.lastLimit track by item.sys_id" style="margin:0px" >
          <div role="cell" class="col-xs-6 padder-l-none padder-r-none main-column">
            <div class="primary-display">
              <a href="?id={{::item.url.id}}&table={{::item.url.table}}&sys_id={{::item.url.sys_id}}" sn-focus="{{::item.highlight}}" aria-label="{{::item.display_field}} , {{::item.display_number}}"> {{::item.display_field}} </a>
            </div>
            <small class="text-muted">
              <div ng-repeat="f in item.secondary_displays" class="secondary-display">
                <span >{{::f.display_value}}</span>
              </div>
            </small>
          </div>
          <div role="cell" class="col-xs-3 padder-l-none padder-r-none state-column">
            <div class="state">
              <span> {{::item.state}}</span>
            </div>
          </div>
          <div role="cell" class="col-xs-3 padder-l-none padder-r-none updated-column">
            <div class="updated">
              <i class="fa fa-clock-o" aria-hidden="true" title="${Updated}"></i>
              <sn-time-ago timestamp="::item.updated_on"/>
            </div>
          </div>
        </li>
      </ul>
    </div>

      <div class="col-sm-12 pull-none" ng-if="c.data.hasMore" style="padding-bottom:15px">
					<div class="text-a-c" ng-if="c.fetching">
          	<i class="fa fa-spinner fa-pulse fa-2x fa-fw"></i>
						<span class="sr-only">${Loading more requests}</span>  
  	      </div>
          <button class="btn btn-default btn-show-more" ng-click="c.loadMore()"> {{::data.messages.showMoreRequests}} </button>  
      </div>
    
</script>]]></template>
    </sp_widget>
</record_update>
