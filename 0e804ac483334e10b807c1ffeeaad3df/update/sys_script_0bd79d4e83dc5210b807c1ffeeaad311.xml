<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_script">
    <sys_script action="INSERT_OR_UPDATE">
        <abort_action>false</abort_action>
        <access>package_private</access>
        <action_delete>false</action_delete>
        <action_insert>false</action_insert>
        <action_query>false</action_query>
        <action_update>true</action_update>
        <active>true</active>
        <add_message>false</add_message>
        <advanced>true</advanced>
        <change_fields>false</change_fields>
        <client_callable>false</client_callable>
        <collection>x_1399238_lva_vehicle_servicing_t</collection>
        <condition/>
        <description/>
        <execute_function>false</execute_function>
        <filter_condition table="x_1399238_lva_vehicle_servicing_t">ticket_statusCHANGESTOclosed^EQ<item display_value="Closed" endquery="false" field="ticket_status" goto="false" newquery="false" operator="CHANGESTO" or="false" value="closed"/>
            <item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/>
        </filter_condition>
        <is_rest>false</is_rest>
        <message/>
        <name>Update tracker status when servicing tic</name>
        <order>100</order>
        <priority>100</priority>
        <rest_method/>
        <rest_method_text/>
        <rest_service/>
        <rest_service_text/>
        <rest_variables/>
        <role_conditions/>
        <script><![CDATA[(function executeRule(current, previous /*null when async*/) {

	// Add your code here.  Update tracker status when servicing ticket is set to closed 
var cust = current.vehicle_tracker;

if(cust){
		var gr = new GlideRecord("x_1399238_lva_vehicle_tracker");
		//var newVeRe = current.vehicle_tracker;
		if(gr.get(cust))
		
	{
		gr.setValue('vehicle_status',current.vehicle_status); 
		gr.setValue('tracker_status','closed');
		gr.update();

	}
	//gr.update();
		}
})(current, previous);

/*
Update tracker status when servicing ticket is set to closed

Create a variable for the current sys_id of the vehicle tracker record
Create an “if statement” for the variable previously created
Create a variable for a new GlideRecord on the vehicle tracker table
Create an “if statement” on the vehicle tracker gliderecord to get the 
current vehicle tracker record (you have this in variable form)
Set the value of the vehicle status field on the GlideRecord to the 
current vehicle status on the servicing table
Set the value of the tracker status field to closed on the GlideRecord
Update the GlideRecord

*/



]]></script>
        <sys_class_name>sys_script</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-08-29 22:29:22</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_domain_path>/</sys_domain_path>
        <sys_id>0bd79d4e83dc5210b807c1ffeeaad311</sys_id>
        <sys_mod_count>27</sys_mod_count>
        <sys_name>Update tracker status when servicing tic</sys_name>
        <sys_overrides/>
        <sys_package display_value="Loaner Vehicle Request and Inventory" source="x_1399238_lva">0e804ac483334e10b807c1ffeeaad3df</sys_package>
        <sys_policy/>
        <sys_scope display_value="Loaner Vehicle Request and Inventory">0e804ac483334e10b807c1ffeeaad3df</sys_scope>
        <sys_update_name>sys_script_0bd79d4e83dc5210b807c1ffeeaad311</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-08-30 03:38:44</sys_updated_on>
        <template/>
        <when>after</when>
    </sys_script>
    <sys_translated_text action="delete_multiple" query="documentkey=0bd79d4e83dc5210b807c1ffeeaad311"/>
</record_update>
